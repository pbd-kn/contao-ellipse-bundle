<form method="post" action="<?= \Contao\Environment::get('uri'); ?>" class="ellipse-load-form" style="margin-bottom:1em;">
    <!-- CSRF -->
    <input type="hidden" name="REQUEST_TOKEN" value="<?= $this->csrfToken ?>">
    <input type="hidden" name="FORM_SUBMIT" value="ellipse_load_<?= $this->id ?>">
    <input type="hidden" name="ceId" value="<?= $this->id ?>">

    <label for="variantId_<?= $this->id ?>"><strong>Gespeicherte Darstellungen:</strong></label><br>

    <select name="variantId" id="variantId_<?= $this->id ?>" style="width:70%;padding:4px;">
        <option value="">-- Variante wählen --</option>
        <?php foreach (($this->savedVariants ?? []) as $v): ?>
            <option value="<?= htmlspecialchars($v['id'], ENT_QUOTES) ?>">
                <?= htmlspecialchars($v['title'] ?? 'Ohne Titel', ENT_QUOTES) ?>
            </option>
        <?php endforeach; ?>
    </select>

    <button type="submit" name="loadAction" value="load" class="button-load">🔵 Laden</button>
    <button type="submit" name="loadAction" value="delete" class="button-delete"
            onclick="return confirm('Möchten Sie diese Darstellung wirklich löschen?');">❌ Löschen</button>
</form>

<?php if (!empty($this->loadMessage)): ?>
    <p class="<?= $this->loadSuccess ? 'save-ok' : 'save-warning' ?>"><?= $this->loadMessage ?></p>
<?php endif; ?>
